<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="styles.css" rel="stylesheet" type="text/css">
    <title>PHQ-9 Questionnaire</title>
    <script>
        function calculatePHQScore(event) {
            event.preventDefault();
            let score = 0;

            // Loop through all 9 questions and calculate the total score
            for (let i = 1; i <= 9; i++) {
                const answer = document.querySelector(`input[name="q${i}"]:checked`);
                if (answer) {
                    score += parseInt(answer.value);
                }
            }

            // Set the calculated score in the hidden input field to be passed with the form
            document.getElementById("phq_score").value = score;

            // Display the calculated score in the result <h1>
            document.getElementById("result").innerText = "Your PHQ-9 Score is: " + score;

            // Submit the form after calculating the score
    
        }
        function Submit_Form(){
            document.getElementById("PHQ").submit();
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1>PHQ-9 Questionnaire</h1>
            <h2>Please answer the following questions based on how you've felt over the past two weeks:</h2>
            <form id="phq_form"  method="POST" onsubmit="calculatePHQScore(event)">
                <!-- Question 1 -->
                <label for="q1">1. Little interest or pleasure in doing things?</label><br>
                <input type="radio" name="q1" value="0" required> Not at all<br>
                <input type="radio" name="q1" value="1"> Several days<br>
                <input type="radio" name="q1" value="2"> More than half the days<br>
                <input type="radio" name="q1" value="3"> Nearly every day<br><br>

                <!-- Question 2 -->
                <label for="q2">2. Feeling down, depressed, or hopeless?</label><br>
                <input type="radio" name="q2" value="0" required> Not at all<br>
                <input type="radio" name="q2" value="1"> Several days<br>
                <input type="radio" name="q2" value="2"> More than half the days<br>
                <input type="radio" name="q2" value="3"> Nearly every day<br><br>

                <!-- Question 3 -->
                <label for="q3">3. Trouble falling or staying asleep, or sleeping too much?</label><br>
                <input type="radio" name="q3" value="0" required> Not at all<br>
                <input type="radio" name="q3" value="1"> Several days<br>
                <input type="radio" name="q3" value="2"> More than half the days<br>
                <input type="radio" name="q3" value="3"> Nearly every day<br><br>

                <!-- Question 4 -->
                <label for="q4">4. Feeling tired or having little energy?</label><br>
                <input type="radio" name="q4" value="0" required> Not at all<br>
                <input type="radio" name="q4" value="1"> Several days<br>
                <input type="radio" name="q4" value="2"> More than half the days<br>
                <input type="radio" name="q4" value="3"> Nearly every day<br><br>

                <!-- Question 5 -->
                <label for="q5">5. Poor appetite or overeating?</label><br>
                <input type="radio" name="q5" value="0" required> Not at all<br>
                <input type="radio" name="q5" value="1"> Several days<br>
                <input type="radio" name="q5" value="2"> More than half the days<br>
                <input type="radio" name="q5" value="3"> Nearly every day<br><br>

                <!-- Question 6 -->
                <label for="q6">6. Feeling bad about yourself or that you are a failure or have let yourself or your
                    family down?</label><br>
                <input type="radio" name="q6" value="0" required> Not at all<br>
                <input type="radio" name="q6" value="1"> Several days<br>
                <input type="radio" name="q6" value="2"> More than half the days<br>
                <input type="radio" name="q6" value="3"> Nearly every day<br><br>

                <!-- Question 7 -->
                <label for="q7">7. Trouble concentrating on things, such as reading the newspaper or watching
                    television?</label><br>
                <input type="radio" name="q7" value="0" required> Not at all<br>
                <input type="radio" name="q7" value="1"> Several days<br>
                <input type="radio" name="q7" value="2"> More than half the days<br>
                <input type="radio" name="q7" value="3"> Nearly every day<br><br>

                <!-- Question 8 -->
                <label for="q8">8. Moving or speaking so slowly that other people could have noticed? Or the
                    oppositeâ€”being so fidgety or restless that you have been moving around a lot more than
                    usual?</label><br>
                <input type="radio" name="q8" value="0" required> Not at all<br>
                <input type="radio" name="q8" value="1"> Several days<br>
                <input type="radio" name="q8" value="2"> More than half the days<br>
                <input type="radio" name="q8" value="3"> Nearly every day<br><br>

                <!-- Final question (9 total) -->
                <label for="q9">9. Thoughts that you would be better off dead, or thoughts of hurting yourself in some
                    way?</label><br>
                <input type="radio" name="q9" value="0" required> Not at all<br>
                <input type="radio" name="q9" value="1"> Several days<br>
                <input type="radio" name="q9" value="2"> More than half the days<br>
                <input type="radio" name="q9" value="3"> Nearly every day<br><br>

                <!-- Hidden input to store the calculated PHQ score -->
                <!-- <input type="hidden" id="phq_score" name="phq_score" value=""> -->

                <!-- Submit button -->
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>

            <!-- Display result -->
             <form id="PHQ" action="submit_phq" method="post" onsubmit="Submit_Form">
                <input type="hidden" id="phq_score" name="phq_score" value="">
                <h1 id="result"></h1>
                <button type="submit">next</button>
            </form>
        </div>
    </div>
</body>

</html>
